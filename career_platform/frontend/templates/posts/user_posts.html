{% extends 'base.html' %}
{% load static %}

{% block title %}My Posts - BPUT Career Platform{% endblock %}

{% block content %}
<div class="container-fluid py-4" style="
    background: 
        radial-gradient(circle at 10% 20%, rgba(255, 215, 0, 0.15) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(19, 136, 8, 0.15) 0%, transparent 20%),
        radial-gradient(circle at 50% 50%, rgba(255, 105, 180, 0.1) 0%, transparent 30%),
        radial-gradient(circle at 30% 70%, rgba(0, 71, 171, 0.15) 0%, transparent 25%),
        linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    min-height: 100vh;
    position: relative;
    overflow: hidden;
">

<!-- Lotus Flower Decorations -->
<div style="position: absolute; top: 10%; left: 5%; opacity: 0.08; transform: rotate(-15deg);">
    <i class="fas fa-spa" style="font-size: 80px; color: #FF69B4;"></i>
</div>
<div style="position: absolute; top: 15%; right: 8%; opacity: 0.08; transform: rotate(25deg);">
    <i class="fas fa-spa" style="font-size: 60px; color: #FF9933;"></i>
</div>
<div style="position: absolute; bottom: 20%; left: 8%; opacity: 0.08; transform: rotate(45deg);">
    <i class="fas fa-spa" style="font-size: 70px; color: #138808;"></i>
</div>
<div style="position: absolute; bottom: 15%; right: 5%; opacity: 0.08; transform: rotate(-30deg);">
    <i class="fas fa-spa" style="font-size: 90px; color: #0047AB;"></i>
</div>

<!-- Peacock Feather Decorations -->
<div style="position: absolute; top: 5%; right: 15%; opacity: 0.06;">
    <i class="fas fa-feather-alt" style="font-size: 50px; color: #0047AB;"></i>
</div>
<div style="position: absolute; bottom: 10%; left: 15%; opacity: 0.06; transform: rotate(180deg);">
    <i class="fas fa-feather-alt" style="font-size: 40px; color: #138808;"></i>
</div>

<style>
@keyframes gentleFloat {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-8px); }
}

.card {
    animation: gentleFloat 8s ease-in-out infinite;
}

.card:nth-child(odd) {
    animation-delay: 1s;
}

.card:nth-child(even) {
    animation-delay: 2s;
}
</style>

    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow border-0" style="
                border-radius: 20px; 
                border: 2px solid rgba(255, 255, 255, 0.2);
                background: linear-gradient(135deg, 
                    rgba(255, 255, 255, 0.98) 0%, 
                    rgba(248, 249, 250, 0.98) 100%);
                backdrop-filter: blur(20px);
                position: relative;
                overflow: hidden;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            ">
            <div style="
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 6px;
                background: linear-gradient(90deg, 
                    #FF9933, 
                    #FF69B4, 
                    #138808, 
                    #0047AB);
            "></div>
                <div class="card-body p-5">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h1 class="mb-3" style="
                                color: #2D3748; 
                                font-weight: 800;
                                font-size: 2.5rem;
                                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
                                background: linear-gradient(135deg, #FF9933, #138808);
                                -webkit-background-clip: text;
                                -webkit-text-fill-color: transparent;
                                background-clip: text;
                            ">
                                <i class="fas fa-user-circle me-3"></i>My Posts
                            </h1>
                            <p class="mb-0" style="
                                color: #4A5568; 
                                font-size: 1.2rem;
                                font-weight: 500;
                                text-shadow: 0 1px 2px rgba(255,255,255,0.8);
                            ">
                                Manage and view all your shared posts and activities
                            </p>
                        </div>
                        <div>
                            <a href="{% url 'posts_feed' %}" class="btn py-3 px-5" style="
                                background: linear-gradient(135deg, #FF9933, #138808); 
                                color: white; 
                                border: none; 
                                border-radius: 12px; 
                                font-weight: 700;
                                font-size: 1.1rem;
                                transition: all 0.3s ease;
                                box-shadow: 0 4px 15px rgba(255, 153, 51, 0.4);
                                text-shadow: 0 1px 2px rgba(0,0,0,0.2);
                            ">
                                <i class="fas fa-arrow-left me-2"></i>Back to Feed
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Stats Sidebar -->
        <div class="col-lg-3 mb-4">
            <div class="card shadow border-0" style="
                border-radius: 20px; 
                border: 2px solid rgba(255, 255, 255, 0.2);
                background: linear-gradient(135deg, 
                    rgba(255, 255, 255, 0.98) 0%, 
                    rgba(248, 249, 250, 0.98) 100%);
                backdrop-filter: blur(20px);
                position: relative;
                overflow: hidden;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            ">
            <div style="
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 6px;
                background: linear-gradient(90deg, 
                    #138808, 
                    #0047AB, 
                    #FF9933);
            "></div>
                <div class="card-body p-4">
                    <div class="text-center mb-4">
                        <img src="{% if has_profile_photo %}{{ user_profile.profile_photo.url }}{% else %}{% static 'images/default-avatar.png' %}{% endif %}" 
                             class="rounded-circle mb-3 shadow" style="
                                width: 100px; 
                                height: 100px; 
                                object-fit: cover; 
                                border: 4px solid #FF9933;
                                box-shadow: 0 8px 25px rgba(255, 153, 51, 0.4);
                             ">
                        <h5 style="
                            color: #2D3748; 
                            font-weight: 700;
                            margin-bottom: 0.5rem;
                            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
                        ">{{ user.username }}</h5>
                        <span class="badge shadow-sm" style="
                            background: linear-gradient(45deg, #FF9933, #138808); 
                            color: white; 
                            padding: 6px 16px; 
                            border-radius: 20px; 
                            font-size: 0.9rem;
                            font-weight: 600;
                            box-shadow: 0 4px 12px rgba(255, 153, 51, 0.3);
                        ">
                            {{ user_profile.get_role_display|default:"Student" }}
                        </span>
                    </div>

                    <div class="p-4 mb-4" style="
                        background: linear-gradient(135deg, rgba(255, 153, 51, 0.1), rgba(19, 136, 8, 0.1)); 
                        border-radius: 15px; 
                        border-left: 5px solid #FF9933;
                        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
                    ">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <span style="
                                color: #2D3748; 
                                font-weight: 600;
                                font-size: 1rem;
                            ">üìù Total Posts:</span>
                            <strong class="text-primary" style="
                                font-size: 1.4rem;
                                font-weight: 700;
                                text-shadow: 0 1px 2px rgba(0,0,0,0.1);
                            ">{{ posts.count }}</strong>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <span style="
                                color: #2D3748; 
                                font-weight: 600;
                                font-size: 1rem;
                            ">‚ù§Ô∏è Total Likes:</span>
                            <strong class="text-success" style="
                                font-size: 1.4rem;
                                font-weight: 700;
                                text-shadow: 0 1px 2px rgba(0,0,0,0.1);
                            ">{{ user.like_set.count }}</strong>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            <span style="
                                color: #2D3748; 
                                font-weight: 600;
                                font-size: 1rem;
                            ">üí¨ Total Comments:</span>
                            <strong class="text-info" style="
                                font-size: 1.4rem;
                                font-weight: 700;
                                text-shadow: 0 1px 2px rgba(0,0,0,0.1);
                            ">{{ user.comment_set.count }}</strong>
                        </div>
                    </div>

                    <div class="mt-4">
                        <a href="{% url 'edit_profile_posts' %}" class="btn w-100 py-3 mb-3" style="
                            background: linear-gradient(135deg, #FF9933, #138808); 
                            color: white; 
                            border: none; 
                            border-radius: 12px; 
                            font-weight: 700;
                            font-size: 1rem;
                            transition: all 0.3s ease;
                            box-shadow: 0 4px 15px rgba(255, 153, 51, 0.4);
                            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
                        ">
                            <i class="fas fa-camera me-2"></i>Edit Profile
                        </a>
                        <a href="{% url 'posts_feed' %}" class="btn w-100 py-3" style="
                            background: transparent; 
                            border: 3px solid #FF9933; 
                            color: #FF9933; 
                            border-radius: 12px; 
                            font-weight: 700;
                            font-size: 1rem;
                            transition: all 0.3s ease;
                            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
                        ">
                            <i class="fas fa-plus me-2"></i>Create New Post
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Posts Content -->
        <div class="col-lg-9">
            {% if posts %}
                <div class="card shadow border-0" style="
                    border-radius: 20px; 
                    border: 2px solid rgba(255, 255, 255, 0.2);
                    background: linear-gradient(135deg, 
                        rgba(255, 255, 255, 0.98) 0%, 
                        rgba(248, 249, 250, 0.98) 100%);
                    backdrop-filter: blur(20px);
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
                ">
                    <div class="card-body p-5">
                        <h4 class="mb-4" style="
                            color: #2D3748; 
                            font-weight: 700;
                            font-size: 1.8rem;
                            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
                        ">
                            <i class="fas fa-list me-3" style="color: #FF9933;"></i>Your Posts ({{ posts.count }})
                        </h4>
                        
                        <div id="postsContainer">
                            {% for post in posts %}
                                <div class="card shadow-sm border-0 mb-4" style="
                                    border-radius: 20px; 
                                    border: 2px solid rgba(255, 255, 255, 0.3);
                                    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(248,249,250,0.95));
                                    transition: all 0.3s ease;
                                    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
                                ">
                                    <div style="
                                        position: absolute;
                                        top: 0;
                                        left: 0;
                                        right: 0;
                                        height: 5px;
                                        background: linear-gradient(90deg, #138808, #0047AB, #FF9933);
                                        border-radius: 20px 20px 0 0;
                                    "></div>
                                    <div class="card-body p-4">
                                        <!-- Post Header -->
                                        <div class="d-flex justify-content-between align-items-start mb-4">
                                            <div class="d-flex align-items-center">
                                                <img src="{% if post.user.userprofile.profile_photo %}{{ post.user.userprofile.profile_photo.url }}{% else %}{% static 'images/default-avatar.png' %}{% endif %}" 
                                                     class="rounded-circle me-3 shadow" style="
                                                        width: 60px; 
                                                        height: 60px; 
                                                        object-fit: cover; 
                                                        border: 3px solid #FF9933;
                                                        box-shadow: 0 4px 12px rgba(255, 153, 51, 0.3);
                                                     ">
                                                <div>
                                                    <h6 class="mb-1 fw-bold" style="
                                                        color: #2D3748; 
                                                        font-size: 1.1rem;
                                                        text-shadow: 0 1px 2px rgba(0,0,0,0.1);
                                                    ">{{ post.user.username }}</h6>
                                                    <div class="d-flex align-items-center">
                                                        <span class="badge me-2 shadow-sm" style="
                                                            background: linear-gradient(45deg, #FF9933, #138808); 
                                                            color: white; 
                                                            padding: 4px 12px; 
                                                            border-radius: 15px; 
                                                            font-size: 0.8rem;
                                                            font-weight: 600;
                                                        ">
                                                            {{ post.user.userprofile.get_role_display|default:"Student" }}
                                                        </span>
                                                        <small style="
                                                            color: #718096; 
                                                            font-weight: 500;
                                                            font-size: 0.85rem;
                                                        ">{{ post.created_at|timesince }} ago</small>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            {% if post.user == user %}
                                            <div class="dropdown">
                                                <button class="btn btn-sm shadow-sm" type="button" data-bs-toggle="dropdown" style="
                                                    background: transparent; 
                                                    border: 2px solid #E2E8F0; 
                                                    color: #718096; 
                                                    border-radius: 10px;
                                                    font-weight: 600;
                                                ">
                                                    <i class="fas fa-ellipsis-h"></i>
                                                </button>
                                                <ul class="dropdown-menu shadow-lg" style="
                                                    border-radius: 12px;
                                                    border: 2px solid #E2E8F0;
                                                ">
                                                    <li>
                                                        <form method="POST" action="{% url 'delete_post' post.id %}" class="d-inline">
                                                            {% csrf_token %}
                                                            <button type="submit" class="dropdown-item text-danger" onclick="return confirm('Are you sure you want to delete this post?')" style="
                                                                font-weight: 600;
                                                                border-radius: 8px;
                                                                margin: 2px 8px;
                                                            ">
                                                                <i class="fas fa-trash me-2"></i>Delete Post
                                                            </button>
                                                        </form>
                                                    </li>
                                                </ul>
                                            </div>
                                            {% endif %}
                                        </div>

                                        <!-- Post Content -->
                                        <div class="post-content mb-4">
                                            <p class="mb-3" style="
                                                line-height: 1.7; 
                                                font-size: 1.05rem; 
                                                color: #2D3748;
                                                font-weight: 500;
                                                text-shadow: 0 1px 2px rgba(0,0,0,0.05);
                                            ">{{ post.content|linebreaksbr }}</p>
                                            
                                            {% if post.image %}
                                            <div class="post-image mb-3 text-center">
                                                <img src="{{ post.image.url }}" alt="Post image" class="img-fluid rounded shadow" style="
                                                    max-height: 400px; 
                                                    width: auto; 
                                                    border: 3px solid #E2E8F0;
                                                    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
                                                ">
                                            </div>
                                            {% endif %}
                                            
                                            {% if post.video %}
                                            <div class="post-video mb-3 text-center">
                                                <video controls class="img-fluid rounded shadow" style="
                                                    max-height: 400px; 
                                                    width: auto; 
                                                    border: 3px solid #E2E8F0;
                                                    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
                                                ">
                                                    <source src="{{ post.video.url }}" type="video/mp4">
                                                    Your browser does not support the video tag.
                                                </video>
                                            </div>
                                            {% endif %}
                                        </div>

                                        <!-- Post Stats -->
                                        <div class="d-flex justify-content-between mb-3" style="
                                            background: linear-gradient(135deg, rgba(255, 153, 51, 0.05), rgba(19, 136, 8, 0.05));
                                            padding: 12px 16px;
                                            border-radius: 12px;
                                            border: 1px solid rgba(255, 153, 51, 0.2);
                                        ">
                                            <span style="
                                                color: #2D3748; 
                                                font-weight: 600;
                                                font-size: 0.95rem;
                                            ">
                                                <i class="fas fa-heart text-danger me-2"></i>
                                                <span class="like-count">{{ post.like_set.count }}</span> likes
                                            </span>
                                            <span style="
                                                color: #2D3748; 
                                                font-weight: 600;
                                                font-size: 0.95rem;
                                            ">
                                                <i class="fas fa-comment me-2" style="color: #0047AB;"></i>
                                                {{ post.comment_set.count }} comments
                                            </span>
                                        </div>

                                        <!-- Action Buttons -->
                                        <div class="d-flex justify-content-around border-top border-bottom py-3 mb-3" style="
                                            border-color: #E2E8F0 !important;
                                        ">
                                            <button class="btn btn-sm {% if user in post.like_set.all %}text-danger{% else %}text-muted{% endif %}" 
                                                    onclick="toggleLike('{{ post.id }}', this)" style="
                                                        border: none; 
                                                        background: none;
                                                        font-weight: 600;
                                                        font-size: 0.95rem;
                                                        transition: all 0.3s ease;
                                                    ">
                                                <i class="{% if user in post.like_set.all %}fas{% else %}far{% endif %} fa-heart me-2"></i>
                                                Like
                                            </button>
                                            
                                            <button class="btn btn-sm text-muted" type="button" data-bs-toggle="collapse" 
                                                    data-bs-target="#comments-{{ post.id }}" style="
                                                        border: none; 
                                                        background: none;
                                                        font-weight: 600;
                                                        font-size: 0.95rem;
                                                        transition: all 0.3s ease;
                                                    ">
                                                <i class="fas fa-comment me-2"></i>
                                                Comment
                                            </button>
                                            
                                            <button class="btn btn-sm text-muted" onclick="sharePost('{{ post.id }}')" style="
                                                border: none; 
                                                background: none;
                                                font-weight: 600;
                                                font-size: 0.95rem;
                                                transition: all 0.3s ease;
                                            ">
                                                <i class="fas fa-share me-2"></i>
                                                Share
                                            </button>
                                        </div>

                                        <!-- Comments Section -->
                                        <div class="collapse" id="comments-{{ post.id }}">
                                            <div class="comments-list mb-4">
                                                {% for comment in post.comment_set.all %}
                                                <div class="d-flex mb-3">
                                                    <img src="{% if comment.user.userprofile.profile_photo %}{{ comment.user.userprofile.profile_photo.url }}{% else %}{% static 'images/default-avatar.png' %}{% endif %}" 
                                                         class="rounded-circle me-3 shadow" style="
                                                            width: 40px; 
                                                            height: 40px; 
                                                            object-fit: cover;
                                                            border: 2px solid #E2E8F0;
                                                         ">
                                                    <div class="flex-grow-1">
                                                        <div class="bg-light rounded p-3 shadow-sm" style="
                                                            border: 1px solid #E2E8F0;
                                                        ">
                                                            <strong class="d-block mb-1" style="
                                                                color: #2D3748; 
                                                                font-size: 0.95rem;
                                                            ">{{ comment.user.username }}</strong>
                                                            <p class="mb-2" style="
                                                                font-size: 0.9rem; 
                                                                color: #4A5568;
                                                                font-weight: 500;
                                                                line-height: 1.5;
                                                            ">{{ comment.content }}</p>
                                                            <small style="
                                                                color: #718096; 
                                                                font-weight: 500;
                                                                font-size: 0.8rem;
                                                            ">{{ comment.created_at|timesince }} ago</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                {% empty %}
                                                <div class="text-center py-4" style="
                                                    color: #718096; 
                                                    font-weight: 600;
                                                    background: linear-gradient(135deg, rgba(255, 153, 51, 0.05), rgba(19, 136, 8, 0.05));
                                                    border-radius: 12px;
                                                    border: 2px dashed #E2E8F0;
                                                ">
                                                    <i class="fas fa-comments me-2 fa-lg"></i>
                                                    No comments yet. Be the first to comment!
                                                </div>
                                                {% endfor %}
                                            </div>
                                            
                                            <!-- Add Comment Form -->
                                            <form class="add-comment-form" onsubmit="addComment('{{ post.id }}', this); return false;">
                                                {% csrf_token %}
                                                <div class="input-group shadow-sm">
                                                    <input type="text" name="content" class="form-control" 
                                                           placeholder="Write a comment..." required style="
                                                              border-radius: 20px 0 0 20px; 
                                                              border: 2px solid #E2E8F0;
                                                              padding: 12px 20px;
                                                              font-size: 0.95rem;
                                                              font-weight: 500;
                                                              background: white;
                                                           ">
                                                    <button class="btn" type="submit" style="
                                                        border-radius: 0 20px 20px 0; 
                                                        background: linear-gradient(135deg, #FF9933, #138808); 
                                                        color: white;
                                                        border: 2px solid #E2E8F0;
                                                        border-left: none;
                                                        font-weight: 600;
                                                        padding: 12px 20px;
                                                    ">
                                                        <i class="fas fa-paper-plane"></i>
                                                    </button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            {% else %}
                <div class="card shadow border-0" style="
                    border-radius: 20px; 
                    border: 2px solid rgba(255, 255, 255, 0.2);
                    background: linear-gradient(135deg, 
                        rgba(255, 255, 255, 0.98) 0%, 
                        rgba(248, 249, 250, 0.98) 100%);
                    backdrop-filter: blur(20px);
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
                ">
                    <div class="card-body p-5 text-center">
                        <i class="fas fa-edit fa-4x mb-4" style="
                            color: #FF9933;
                            text-shadow: 0 4px 12px rgba(255, 153, 51, 0.4);
                        "></i>
                        <h3 style="
                            color: #2D3748; 
                            font-weight: 700;
                            margin-bottom: 1rem;
                            font-size: 2rem;
                            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
                        ">No Posts Yet</h3>
                        <p class="mb-4" style="
                            color: #4A5568; 
                            font-size: 1.2rem;
                            font-weight: 500;
                            line-height: 1.6;
                        ">You haven't created any posts yet. Share your first post with the community! üåü</p>
                        <a href="{% url 'posts_feed' %}" class="btn btn-lg py-3 px-5 shadow" style="
                            background: linear-gradient(135deg, #FF9933, #138808); 
                            color: white; 
                            border: none; 
                            border-radius: 15px; 
                            font-weight: 700;
                            font-size: 1.2rem;
                            transition: all 0.3s ease;
                            box-shadow: 0 8px 25px rgba(255, 153, 51, 0.5);
                            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
                        ">
                            <i class="fas fa-plus me-2"></i>Create Your First Post
                        </a>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<script>
// Enhanced Like functionality
function toggleLike(postId, button) {
    const url = `/users/posts/${postId}/like/`;
    
    fetch(url, {
        method: 'POST',
        headers: {
            'X-CSRFToken': getCSRFToken(),
            'X-Requested-With': 'XMLHttpRequest'
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            const likeCount = button.closest('.card').querySelector('.like-count');
            if (likeCount) {
                likeCount.textContent = data.like_count;
            }
            
            if (data.liked) {
                button.classList.add('text-danger');
                button.innerHTML = '<i class="fas fa-heart me-2"></i> Liked';
                button.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    button.style.transform = 'scale(1)';
                }, 300);
            } else {
                button.classList.remove('text-danger');
                button.innerHTML = '<i class="far fa-heart me-2"></i> Like';
            }
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Error liking post. Please try again.');
    });
}

// Enhanced Comment functionality
function addComment(postId, form) {
    const formData = new FormData(form);
    const url = `/users/posts/${postId}/comment/`;
    
    fetch(url, {
        method: 'POST',
        body: formData,
        headers: {
            'X-CSRFToken': getCSRFToken(),
            'X-Requested-With': 'XMLHttpRequest'
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            form.reset();
            location.reload(); // Simple reload for now
        } else {
            alert('Error adding comment: ' + (data.errors || 'Please try again.'));
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Network error. Please try again.');
    });
}

// Utility functions
function getCSRFToken() {
    return document.querySelector('[name=csrfmiddlewaretoken]').value;
}

function sharePost(postId) {
    const postUrl = window.location.href;
    if (navigator.share) {
        navigator.share({
            title: 'BPUT Community Post',
            text: 'Check out this post from BPUT Community',
            url: postUrl,
        });
    } else {
        navigator.clipboard.writeText(postUrl).then(() => {
            alert('Post link copied to clipboard!');
        });
    }
}

// Enhanced button hover effects
document.addEventListener('DOMContentLoaded', function() {
    console.log('üé® My Posts Page with Enhanced Text Visibility Loaded!');
    
    // Add hover effects to action buttons
    const actionButtons = document.querySelectorAll('.card .btn');
    actionButtons.forEach(button => {
        button.addEventListener('mouseenter', function() {
            if (!this.classList.contains('text-danger')) {
                this.style.transform = 'translateY(-2px)';
                this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
            }
        });
        
        button.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = 'none';
        });
    });
    
    // Add hover effects to cards
    const postCards = document.querySelectorAll('.card');
    postCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.boxShadow = '0 15px 35px rgba(0,0,0,0.2)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 8px 25px rgba(0,0,0,0.1)';
        });
    });
});
</script>
{% endblock %}